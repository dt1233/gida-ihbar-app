:root {
  --bg: #0f172a;
  --card: #111827;
  --muted: #9ca3af;
  --text: #e5e7eb;
  --heading: #e2e8f0;
  --link: #93c5fd;
  --accent: #22c55e;
  --accent-2: #60a5fa;
}
html[data-theme="light"] {
  --bg: #f5f7fb;
  --card: #ffffff;
  --muted: #6b7280;
  --text: #0f172a;
  --heading: #0b1220;
  --link: #2563eb;
  --accent: #16a34a;
  --accent-2: #2563eb;
}
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; background: var(--bg); color: var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
.container { width: min(1100px, 92%); margin: 0 auto; }
header.container { padding: 24px 0 8px; }
.header-row { display: flex; align-items: center; justify-content: space-between; gap: 16px; }
.header-actions { display: flex; align-items: center; gap: 10px; }
.theme-toggle, .notify-btn { border: 1px solid #1f2937; background: var(--card); color: var(--text); border-radius: 999px; padding: 8px 12px; cursor: pointer; box-shadow: 0 4px 14px rgba(0,0,0,0.18); }
.notify-btn { position: relative; }
.badge { position: absolute; top: -6px; right: -6px; background: #ef4444; color: #fff; border-radius: 999px; padding: 3px 6px; font-size: 11px; border: 2px solid var(--card); }
/* Attention pulse for new announcements */
.notify-btn.has-new::after { content: ""; position: absolute; top: -2px; right: -2px; width: 10px; height: 10px; background: #ef4444; border-radius: 999px; box-shadow: 0 0 0 2px var(--card); }
.notify-btn.has-new::before { content: ""; position: absolute; top: -6px; right: -6px; width: 18px; height: 18px; border-radius: 999px; border: 2px solid rgba(239,68,68,0.7); animation: bellPulse 1.6s ease-out infinite; }
@keyframes bellPulse { 0% { transform: scale(0.6); opacity: 0.9; } 70% { transform: scale(1.3); opacity: 0; } 100% { transform: scale(1.3); opacity: 0; } }
.card { background: var(--card); border: 1px solid #1f2937; border-radius: 12px; padding: 16px; margin: 16px 0; box-shadow: 0 8px 24px rgba(0,0,0,0.25); }
.footer { padding: 24px 0 40px; color: var(--muted); display: flex; justify-content: space-between; }
.link { color: var(--link); }

/* Carousel */
.carousel { position: relative; background: #0b1220; border: 1px solid #1f2937; border-radius: 12px; padding: 10px; display: flex; align-items: center; justify-content: center; min-height: min(70vh, 650px); }
.carousel img { max-width: 100%; max-height: calc(min(70vh, 650px) - 20px); object-fit: contain; background: #000; border-radius: 8px; box-shadow: 0 10px 28px rgba(0,0,0,0.35); opacity: 1; transition: opacity .25s ease; }
.car-prev, .car-next { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.08); color: #fff; border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; width: 44px; height: 44px; display: grid; place-items: center; font-size: 26px; cursor: pointer; backdrop-filter: blur(4px); box-shadow: 0 8px 20px rgba(0,0,0,0.3); }
.car-prev { left: 12px; } .car-next { right: 12px; }

/* Lightbox */
.lightbox { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: none; align-items: center; justify-content: center; z-index: 1000; }
.lightbox.open { display: flex; }
.lb-stage { position: relative; max-width: 92vw; max-height: 88vh; display: flex; flex-direction: column; align-items: center; gap: 10px; }
.lb-stage img { max-width: 92vw; max-height: 80vh; border-radius: 10px; box-shadow: 0 10px 40px rgba(0,0,0,0.6); background: #000; object-fit: contain; opacity: 1; transition: opacity .25s ease; }
.lb-caption { color: var(--muted); text-align: center; font-size: 0.95rem; }
.lb-counter { color: var(--text); font-size: 0.85rem; opacity: 0.9; }
.lb-hint { color: var(--muted); font-size: .85rem; opacity: .9; }
.lb-close, .lb-prev, .lb-next { position: absolute; background: rgba(255,255,255,0.1); color: #fff; border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; font-size: 28px; line-height: 1; width: 44px; height: 44px; display: grid; place-items: center; cursor: pointer; backdrop-filter: blur(4px); }
.lb-close { top: 24px; right: 24px; } .lb-prev { left: 24px; top: 50%; transform: translateY(-50%); } .lb-next { right: 24px; top: 50%; transform: translateY(-50%); }
.lb-play { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(255,255,255,0.12); color: #fff; border: 1px solid rgba(255,255,255,0.25); border-radius: 999px; width: 56px; height: 56px; display: grid; place-items: center; font-size: 22px; cursor: pointer; backdrop-filter: blur(6px); box-shadow: 0 8px 28px rgba(0,0,0,0.35); }

/* Notifications Overlay */
.notify-panel { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; align-items: flex-start; justify-content: center; padding-top: 80px; z-index: 1100; }
.notify-panel.open { display: flex; }
.notify-content { width: min(720px, 92%); background: var(--card); border: 1px solid #1f2937; border-radius: 12px; box-shadow: 0 18px 48px rgba(0,0,0,0.35); overflow: hidden; }
.notify-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 14px; border-bottom: 1px solid #1f2937; }
.notify-list { list-style: none; margin: 0; padding: 8px 14px; max-height: 60vh; overflow: auto; }
.notify-list .ann-item { padding: 8px 6px; border-radius: 8px; cursor: pointer; }
.notify-list .ann-item:hover { background: rgba(255,255,255,0.04); }

/* Scenario typography */
.scenario-view { line-height: 1.75; font-size: 1.05rem; }
.scenario-view h1, .scenario-view h2, .scenario-view h3 { color: var(--accent-2); letter-spacing: 0.2px; font-family: Georgia, Cambria, "Times New Roman", Times, serif; font-weight: 700; }
.scenario-view h2 { border-bottom: 1px dashed #1f2937; padding-bottom: .25em; }
.scenario-view a { color: var(--link); text-decoration: underline; text-underline-offset: 2px; }

/* Announcement modal */
.ann-modal { position: fixed; inset: 0; background: rgba(0,0,0,0.55); display: none; align-items: center; justify-content: center; z-index: 1200; }
.ann-modal.open { display: flex; }
.ann-card { width: min(640px, 92%); background: var(--card); border: 1px solid #1f2937; border-radius: 14px; box-shadow: 0 22px 60px rgba(0,0,0,0.45); position: relative; padding: 18px; }
.ann-main { text-align: center; font-size: 1.05rem; line-height: 1.6; margin-bottom: 14px; color: var(--text); }
.ann-meta { display: flex; justify-content: space-between; color: var(--muted); font-size: 0.9rem; }
.ann-close { position: absolute; top: 10px; right: 10px; width: 36px; height: 36px; background: transparent; color: var(--text); border: 1px solid #1f2937; border-radius: 8px; cursor: pointer; }
